<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout}">
<head>
<meta charset="UTF-8">
<title>회원 목록</title>
<link th:href="@{/css/memberList.css}" type="text/css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" />
<script th:src="@{/js/jquery-3.7.1.slim.js}"></script>
</head>
<body>
	<div layout:fragment="content">
		<main class="main-content site-wrapper-reveal">
			<section>
				<div style="height: 142px; z-index: 8; background-color: #666666">&emsp;</div>
			</section>
			<section style="background-color: #eee;">
			  <div class="container py-5">
			    <div class="row">
			      <div class="col">
			        <nav aria-label="breadcrumb" class="bg-body-tertiary rounded-3 mb-4">
			          <ol class="breadcrumb mb-0">
			            <li class="breadcrumb-item"><a th:href="@{/}">메인</a></li>
			            <li class="breadcrumb-item">
			            	<span th:if="${memberDTO.role == 'USER'}">
			            		<a th:href="@{/member/profile}">사용자 프로필</a>
			            	</span>
			            	<span th:unless="${memberDTO.role == 'USER'}">
			            		<a th:href="@{/member/profile}">관리자 프로필</a>
			            	</span>
			            </li>
			            <li class="breadcrumb-item active" aria-current="page">회원 관리</li>
			          </ol>
			        </nav>
			      </div>
			    </div>
			    <div class="row">
			      <div class="col-lg-4">
			        <div class="card mb-4">
			          <div class="card-body text-center">
			            <img th:src="@{/member/thumbnails(fileName=${memberDTO?.profileUUID})}" alt="avatar"
			              class="rounded-circle img-fluid" style="width: 150px; height: 150px;">
			            <div class="d-flex justify-content-center align-items-center mt-3">
						    <h5 class="my-3" id="memberNickname" th:text="${memberDTO?.nickname}"></h5>
						</div>
			            <div class="d-flex justify-content-center mb-2">
			            	<span th:if="${memberDTO?.memberId} == ${session.memberId}">
			            	<input	type="button" value="회원 정보 수정"
			            			data-mdb-button-init data-mdb-ripple-init class="btn btn-secondary btn-sm ms-1" 
			            			th:onclick="|location.href='@{/member/updateProfile}'|">
			            	<input	type="button" value="회원 탈퇴"
			            			data-mdb-button-init data-mdb-ripple-init class="btn btn-danger btn-sm ms-1" 
			            			th:onclick="|location.href='@{/member/signOut}'|">
			            	</span>
			            	<button type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-sm ms-1">Message</button>
			            </div>
			          </div>
			        </div>
			      </div>
			      <div class="col-lg-8">
			        <div class="card mb-4">
			          <div class="card-body">
			          	<div class="main-box clearfix">
							<div class="table-responsive">
								<table class="table user-list">
									<thead>
										<tr>
											<th><span>User</span></th>
											<th><span>Created</span></th>
											<th class="text-center"><span>Status</span></th>
											<th><span>Email</span></th>
											<th>&nbsp;</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="member : ${memberList}">
							                <td>
							                    <img th:src="@{/member/thumbnails(fileName=${memberDTO?.profileUUID})}" alt="avatar" class="rounded-circle img-fluid"
							                    	 style="width: 50px; height: 50px;">
							                    <a href="#" class="user-link" th:text="${member.nickname}"></a>
							                    <span class="user-subhead" th:text="${member.role}"></span>
							                </td>
							                <td th:text="${#dates.format(member.createdAt, 'yyyy-MM-dd')}" id="createdAt"></td>
							                <td class="text-center">
							                    <span class="label label-default">
							                    	<span class="fa-stack" th:if="${member.activeYn} == 'y'">
							                    		<i class="fas fa-check" style="color: green"></i>
							                    	</span>
							                    	<span class="fa-stack" th:unless="${member.activeYn} == 'y'">
							                    		<i class="fas fa-times" style="color: red"></i>
							                    	</span>
							                   	</span>
							                </td>
							                <td>
							                    <a href="#" th:href="${'mailto:' + member.email}" th:text="${member.email}"></a>
							                </td>
							                <td style="width: 10%;" class="table-actions">
											    <a href="#" class="table-link danger">
											    	<span class="fa-stack">
											    		<i class="fas fa-trash-alt"></i>
											    	</span>
											    </a>
											</td>
							            </tr>
									</tbody>
								</table>
							</div>
							<!-- 페이지네이션 추가 -->
						</div>
			          </div>
			        </div>
			      </div>
			    </div>
			  </div>
			</section>
		</main>
	</div>
</body>
</html>